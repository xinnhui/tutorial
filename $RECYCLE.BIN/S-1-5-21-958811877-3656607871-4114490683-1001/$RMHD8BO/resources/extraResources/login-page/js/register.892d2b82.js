(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["register"],{"41ea":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"resetpwd-wrapper"},[a("div",{staticClass:"modal-header",attrs:{slot:"header"},slot:"header"},[a("span",{directives:[{name:"t",rawName:"v-t",value:e.modalTitle,expression:"modalTitle"}]})]),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.email",expression:"'account.ui.email'"}],attrs:{for:"resetpwd-email"}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.resetpwdEmail,expression:"resetpwdEmail"}],ref:"resetpwd-email-input",staticClass:"ivu-input",attrs:{id:"resetpwd-email",placeholder:"请输入邮箱"},domProps:{value:e.resetpwdEmail},on:{focus:e.refreshCaptcha,input:function(t){t.target.composing||(e.resetpwdEmail=t.target.value)}}})]),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.captcha",expression:"'account.ui.captcha'"}],attrs:{for:"resetpwd-captcha"}}),a("Input",{attrs:{id:"resetpwd-captcha",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendEmailVerCode(t)}},model:{value:e.resetPWdCaptcha,callback:function(t){e.resetPWdCaptcha=t},expression:"resetPWdCaptcha"}}),a("img",{staticClass:"captcha-image resetpwd-captcha-image",attrs:{src:e.resetPwdCaptchaSrc,alt:"",title:"switch"},on:{click:e.refreshCaptcha}})],1),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.verCode",expression:"'account.ui.verCode'"}],attrs:{for:"resetpwd-ver-code"}}),a("Input",{attrs:{id:"resetpwd-ver-code",placeholder:"请输入邮箱验证码"},model:{value:e.resetpwdVerCode,callback:function(t){e.resetpwdVerCode=t},expression:"resetpwdVerCode"}}),e.unGetEmail?a("span",{staticClass:"re-get-ver-code",on:{click:e.sendEmailVerCode}},[e._v("获取验证码")]):a("span",{staticClass:"account-jump-btn re-get-ver-code",class:{"disable-click":e.countdown},on:{click:e.reGetEmailCode}},[e._v("\n      "+e._s(e.getDisplayPrompt())+"\n    ")])],1),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.password",expression:"'account.ui.password'"}],attrs:{for:"resetpwd-password"}}),a("Input",{attrs:{type:"password",id:"resetpwd-password",placeholder:"请输入密码"},model:{value:e.newPassword,callback:function(t){e.newPassword=t},expression:"newPassword"}})],1),a("Button",{directives:[{name:"t",rawName:"v-t",value:"common.ok",expression:"'common.ok'"}],staticClass:"resetpwd-btn large",attrs:{loading:e.resettingPwd,disabled:0===e.newPassword.length||0===e.newPassword.length,type:"primary",size:"large"},on:{click:e.resetPwd}}),a("p",{staticClass:"footer"},[e._v("\n    不需要找回？\n    "),a("span",{staticClass:"account-jump-btn login-btn",on:{click:e.login}},[e._v("返回登录")])])],1)},r=[],i=a("d225"),n=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),g=a("1ffa"),p=a("b011"),h=a("0d32"),m=a("d8c6"),v=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.resetpwdEmail="",e.emailForResetPwd="",e.resetpwdVerCode="",e.newPassword="",e.resettingPwd=!1,e.resetPwdCaptchaSrc="",e.resetPWdCaptcha="",e.gettingVerCode=!1,e.countdown=60,e.unGetEmail=!0,e.countdownInterval=null,e.modalTitle="account.ui.resetpwd",e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"mounted",value:function(){console.log("Reset pwd mounted"),window.sendIpcMessage(m["g"]),this.initPage(),this.refreshCaptcha()}},{key:"login",value:function(){console.log(5),this.$router.push("/")}},{key:"initPage",value:function(){var e=this;console.log("init page"),this.emailForResetPwd="",this.resetpwdEmail="",this.resetpwdVerCode="",this.newPassword="",this.gettingVerCode=!1,this.resettingPwd=!1,this.resetPWdCaptcha="",this.$nextTick((function(){e.$refs["resetpwd-email-input"].focus()}))}},{key:"reGetEmailCode",value:function(){this.countdown||this.sendEmailVerCode()}},{key:"getDisplayPrompt",value:function(){return this.countdown?"".concat(this.countdown,"秒 重新获取"):"重新获取"}},{key:"startCountdown",value:function(){var e=this;this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.countdownInterval=setInterval((function(){if(0===e.countdown&&e.countdownInterval)return clearInterval(e.countdownInterval),void(e.countdownInterval=null);e.countdown--}),1e3)}},{key:"refreshCaptcha",value:function(){this.resetPwdCaptchaSrc="".concat(p["a"],"?t=").concat(Date.now()),this.resetPWdCaptcha=""}},{key:"sendEmailVerCode",value:function(){var e=this;g["validate"](this.resetpwdEmail)?0!==this.resetPWdCaptcha.length?(this.gettingVerCode=!0,Object(p["b"])(this.resetpwdEmail,this.resetPWdCaptcha,!0).then((function(){return e.unGetEmail=!1,e.emailForResetPwd=e.resetpwdEmail,e.gettingVerCode=!1,e.countdown=60,e.startCountdown(),!0})).catch((function(t){return e.gettingVerCode=!1,e.refreshCaptcha(),t.code===h["h"]?e.$Message.error(e.$t("account.message.sendVerCodeError")):t.code===h["a"]?e.$Message.error(e.$t("account.message.wrongCaptcha")):t.code===h["e"]||t.code===h["b"]?e.$Message.error(e.$t("account.message.invalidEmail")):t.code===h["m"]?e.$Message.error(e.$t("account.message.userExists")):e.$Message.error(e.$t("account.message.sendVerCodeError"))}))):this.$Message.error(this.$t("account.message.noCaptcha")):this.$Message.error(this.$t("account.message.invalidEmail"))}},{key:"resetPwd",value:function(){var e=this;g["validate"](this.resetpwdEmail)?0!==this.resetpwdVerCode.length?this.newPassword.length<6||this.newPassword.length>20?this.$Message.error(this.$t("account.message.invalidPassword")):(this.resettingPwd=!0,Object(p["e"])(this.emailForResetPwd,this.newPassword,this.resetpwdVerCode).then((function(){return e.$Message.success(e.$t("account.message.resetPwdSucc")),e.resettingPwd=!1,e.login(),!0})).catch((function(t){return e.resettingPwd=!1,t.code===h["d"]?e.$Message.error(e.$t("account.message.wrongVerCode")):t.code===h["c"]?e.$Message.error(e.$t("account.message.expiredVerCode")):t.code===h["j"]?e.$Message.error(e.$t("account.message.accountNotExist")):t.code===h["k"]?e.$Message.error(e.$t("account.message.resetPwdFail")):t.code===h["e"]||t.code===h["b"]?e.$Message.error(e.$t("account.message.invalidEmail")):e.$Message.error(e.$t("account.message.resetPwdFail"))}))):this.$Message.error(this.$t("account.message.wrongVerCode")):this.$Message.error(this.$t("account.message.invalidEmail"))}}]),t}(u["b"]);v=Object(d["a"])([Object(u["a"])({})],v);var w=v,C=w,f=(a("ebc1"),a("2877")),b=Object(f["a"])(C,s,r,!1,null,"a9a239ae",null);t["default"]=b.exports},"73cf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register-wrapper"},[a("div",{staticClass:"modal-header",attrs:{slot:"header"},slot:"header"},[a("span",{directives:[{name:"t",rawName:"v-t",value:e.modalTitle,expression:"modalTitle"}]})]),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.email",expression:"'account.ui.email'"}],attrs:{for:"register-email"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendEmailVerCode(t)}}}),a("input",{directives:[{name:"model",rawName:"v-model",value:e.registerEmail,expression:"registerEmail"}],ref:"register-email-input",staticClass:"register-input ivu-input",attrs:{id:"register-email",placeholder:"请输入邮箱"},domProps:{value:e.registerEmail},on:{focus:e.refreshCaptcha,input:function(t){t.target.composing||(e.registerEmail=t.target.value)}}})]),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.captcha",expression:"'account.ui.captcha'"}],attrs:{for:"register-captcha"}}),a("Input",{staticClass:"register-input",attrs:{id:"register-captcha",placeholder:"请输入验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendEmailVerCode(t)}},model:{value:e.registerCaptcha,callback:function(t){e.registerCaptcha=t},expression:"registerCaptcha"}}),a("img",{staticClass:"captcha-image register-captcha-image",attrs:{src:e.registerCaptchaSrc,alt:"",title:"switch"},on:{click:e.refreshCaptcha}})],1),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.verCode",expression:"'account.ui.verCode'"}],attrs:{for:"register-ver-code"}}),a("Input",{staticClass:"register-input",attrs:{id:"register-ver-code",placeholder:"请输入邮箱验证码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.registerVerCode,callback:function(t){e.registerVerCode=t},expression:"registerVerCode"}}),e.unGetEmail?a("span",{staticClass:"re-get-ver-code",on:{click:e.sendEmailVerCode}},[e._v("获取验证码")]):a("span",{staticClass:"account-jump-btn re-get-ver-code",class:{"disable-click":e.countdown},on:{click:e.reGetEmailCode}},[e._v("\n      "+e._s(e.getDisplayPrompt())+"\n    ")])],1),a("div",{staticClass:"form-line"},[a("label",{directives:[{name:"t",rawName:"v-t",value:"account.ui.password",expression:"'account.ui.password'"}],attrs:{for:"register-password"}}),a("Input",{staticClass:"register-input",attrs:{type:"password",id:"register-password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.register(t)}},model:{value:e.registerPassword,callback:function(t){e.registerPassword=t},expression:"registerPassword"}})],1),a("div",{staticClass:"form-line"},[a("label",{attrs:{for:"invitationCode"}},[e._v("邀请码")]),a("Input",{attrs:{id:"invitationCode",placeholder:"选填，登陆后24小时内可在邀请码内填写"},model:{value:e.invitationCode,callback:function(t){e.invitationCode=t},expression:"invitationCode"}})],1),a("div",{staticClass:"form-line footer protocol"},[a("Checkbox",{model:{value:e.protocol,callback:function(t){e.protocol=t},expression:"protocol"}},[e._v("阅读并接受"),a("span",{on:{click:function(t){return t.preventDefault(),e.transfer(t)}}},[e._v("《ENFI用户协议》")])])],1),a("Button",{directives:[{name:"t",rawName:"v-t",value:"account.ui.regBtn",expression:"'account.ui.regBtn'"}],staticClass:"get-ver-code-btn large",attrs:{loading:e.registering,type:"primary",disabled:!e.filled,size:"large"},on:{click:e.register}}),a("p",{staticClass:"footer"},[e._v("\n    已有账号？\n    "),a("span",{staticClass:"account-jump-btn login-btn",on:{click:e.login}},[e._v("登录")])])],1)},r=[],i=a("d225"),n=a("b0b4"),o=a("308d"),c=a("6bb5"),l=a("4e2b"),d=a("9ab4"),u=a("60a3"),g=a("1ffa"),p=a("b011"),h=a("0d32"),m=a("d8c6"),v=function(e){function t(){var e;return Object(i["a"])(this,t),e=Object(o["a"])(this,Object(c["a"])(t).apply(this,arguments)),e.curPage=0,e.registerEmail="",e.registerCaptchaSrc="",e.registerCaptcha="",e.emailForRegister="",e.registerVerCode="",e.registerPassword="",e.gettingVerCode=!1,e.registering=!1,e.didVisitedLastPage=!1,e.countdown=60,e.unGetEmail=!0,e.invitationCode="",e.protocol=!1,e.countdownInterval=null,e.modalTitle="account.ui.register",e}return Object(l["a"])(t,e),Object(n["a"])(t,[{key:"mounted",value:function(){console.log("Register mounted"),window.sendIpcMessage(m["e"]),this.refreshCaptcha(),this.initPage()}},{key:"initPage",value:function(){var e=this;this.curPage=0,this.registerEmail="",this.registerCaptcha="",this.emailForRegister="",this.registerVerCode="",this.registerPassword="",this.gettingVerCode=!1,this.registering=!1,this.$nextTick((function(){e.$refs["register-email-input"].focus()}))}},{key:"login",value:function(){this.$router.push("/")}},{key:"reGetEmailCode",value:function(){this.countdown||this.sendEmailVerCode()}},{key:"transfer",value:function(){return window.sendIpcMessage(m["a"]),!1}},{key:"getDisplayPrompt",value:function(){return this.countdown?"".concat(this.countdown,"秒 重新获取"):"重新获取"}},{key:"startCountdown",value:function(){var e=this;this.countdownInterval&&(clearInterval(this.countdownInterval),this.countdownInterval=null),this.countdownInterval=setInterval((function(){if(0===e.countdown&&e.countdownInterval)return clearInterval(e.countdownInterval),void(e.countdownInterval=null);e.countdown--}),1e3)}},{key:"refreshCaptcha",value:function(){this.registerCaptchaSrc="".concat(p["a"],"?t=").concat(Date.now()),this.registerCaptcha=""}},{key:"sendEmailVerCode",value:function(){var e=this;g["validate"](this.registerEmail)?0!==this.registerCaptcha.length?(this.gettingVerCode=!0,Object(p["b"])(this.registerEmail,this.registerCaptcha).then((function(){return e.unGetEmail=!1,e.emailForRegister=e.registerEmail,e.gettingVerCode=!1,e.countdown=60,e.startCountdown(),!0})).catch((function(t){return e.gettingVerCode=!1,e.refreshCaptcha(),t.code===h["h"]?e.$Message.error(e.$t("account.message.sendVerCodeError")):t.code===h["a"]?e.$Message.error(e.$t("account.message.wrongCaptcha")):t.code===h["e"]||t.code===h["b"]?e.$Message.error(e.$t("account.message.invalidEmail")):t.code===h["m"]?e.$Message.error(e.$t("account.message.userExists")):e.$Message.error(e.$t("account.message.sendVerCodeError"))}))):this.$Message.error(this.$t("account.message.noCaptcha")):this.$Message.error(this.$t("account.message.invalidEmail"))}},{key:"register",value:function(){var e=this;0!==this.registerVerCode.length?g["validate"](this.emailForRegister)?this.registerPassword.length<6||this.registerPassword.length>20?this.$Message.error(this.$t("account.message.invalidPassword")):this.protocol?(this.registering=!0,Object(p["d"])(this.emailForRegister,this.registerPassword,this.registerVerCode,this.invitationCode).then((function(){return window.sendIpcMessage(m["f"]),e.login(),!0})).catch((function(t){return e.registering=!1,t.code===h["d"]?e.$Message.error(e.$t("account.message.wrongVerCode")):t.code===h["c"]?(e.curPage=0,e.$Message.error(e.$t("account.message.expiredVerCode"))):t.code===h["f"]?(e.curPage=0,e.$Message.error(e.$t("account.message.wrongEmail"))):t.code===h["e"]||t.code===h["b"]?(e.curPage=0,e.$Message.error(e.$t("account.message.invalidEmail"))):e.$Message.error(e.$t("account.message.regFail"))}))):this.$Message.error("请勾选用户协议"):this.$Message.error(this.$t("account.message.invalidEmail")):this.$Message.error(this.$t("account.message.wrongVerCode"))}},{key:"filled",get:function(){return this.emailForRegister&&this.registerPassword&&this.registerVerCode&&this.protocol}}]),t}(u["b"]);v=Object(d["a"])([Object(u["a"])({})],v);var w=v,C=w,f=(a("df70"),a("2877")),b=Object(f["a"])(C,s,r,!1,null,"4487751c",null);t["default"]=b.exports},ac1e:function(e,t,a){},dcd5:function(e,t,a){},df70:function(e,t,a){"use strict";var s=a("dcd5"),r=a.n(s);r.a},ebc1:function(e,t,a){"use strict";var s=a("ac1e"),r=a.n(s);r.a}}]);
//# sourceMappingURL=register.892d2b82.js.map